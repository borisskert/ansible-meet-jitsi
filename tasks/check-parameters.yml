---
- name: check 'volume' parameter
  assert:
    that:
      - "volume is defined"
      - "volume | length > 0"
    fail_msg: "parameter 'volume' incorrect or missing"

- name: check 'publish.web' parameter
  assert:
    that:
      - "publish.web is defined"
      - "publish.web | string | length > 0"
    fail_msg: "parameter 'publish.web' incorrect or missing"

- name: check 'publish.https' parameter
  assert:
    that:
      - "publish.https is defined"
      - "publish.https | string | length > 0"
    fail_msg: "parameter 'publish.https' incorrect or missing"

- name: check 'publish.web_interface' parameter
  assert:
    that:
      - "publish.web_interface is defined"
      - "publish.web_interface | length > 0"
    fail_msg: "parameter 'publish.web_interface' incorrect or missing"

- name: check 'publish.videobridge_interface' parameter
  assert:
    that:
      - "publish.videobridge_interface is defined"
      - "publish.videobridge_interface | length > 0"
    fail_msg: "parameter 'publish.videobridge_interface' incorrect or missing"

- name: check 'publish.url' parameter
  assert:
    that:
      - "publish.url is defined"
      - "publish.url | length > 0"
    fail_msg: "parameter 'publish.url' incorrect or missing"

- name: check 'users' parameter
  assert:
    that:
      - "users is defined"
    fail_msg: "parameter 'users' is empty"

- name: check user structure in 'users' parameter
  assert:
    that:
      - "item.username is defined"
      - "item.username | length > 0"
      - "item.password is defined"
      - "item.password | length > 0"
    fail_msg: "item in the parameter 'users' is invalid"
  with_items: "{{ users }}"
