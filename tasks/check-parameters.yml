---
- name: check 'jitsi_volume' parameter
  assert:
    that:
      - "jitsi_volume is defined"
      - "jitsi_volume | length > 0"
    fail_msg: "parameter 'jitsi_volume' incorrect or missing"

- name: check 'jitsi_web_port' parameter
  assert:
    that:
      - "jitsi_web_port is defined"
      - "jitsi_web_port | string | length > 0"
    fail_msg: "parameter 'jitsi_web_port' incorrect or missing"

- name: check 'jitsi_https_port' parameter
  assert:
    that:
      - "jitsi_https_port is defined"
      - "jitsi_https_port | string | length > 0"
    fail_msg: "parameter 'jitsi_https_port' incorrect or missing"

- name: check 'jitsi_web_interface' parameter
  assert:
    that:
      - "jitsi_web_interface is defined"
      - "jitsi_web_interface | length > 0"
    fail_msg: "parameter 'jitsi_web_interface' incorrect or missing"

- name: check 'jitsi_videobridge_interface' parameter
  assert:
    that:
      - "jitsi_videobridge_interface is defined"
      - "jitsi_videobridge_interface | length > 0"
    fail_msg: "parameter 'jitsi_videobridge_interface' incorrect or missing"

- name: check 'jitsi_external_url' parameter
  assert:
    that:
      - "jitsi_external_url is defined"
      - "jitsi_external_url | length > 0"
    fail_msg: "parameter 'jitsi_external_url' incorrect or missing"

- name: check 'jitsi_users' parameter
  assert:
    that:
      - "jitsi_users is defined"
    fail_msg: "parameter 'jitsi_users' is empty"

- name: check user structure in 'jitsi_users' parameter
  assert:
    that:
      - "item.username is defined"
      - "item.username | length > 0"
      - "item.password is defined"
      - "item.password | length > 0"
    fail_msg: "item in the parameter 'jitsi_users' is invalid"
  with_items: "{{ jitsi_users }}"
